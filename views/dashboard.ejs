<%- include('dashboard_header')-%>
  <%- include('edit-profile-model')-%>
    <div class="dashboard-wpr">
      <div class="container-fluid">
        <div class="row content">
<!--Sidebar-->
<div class="col-sm-2 sidenav hidden-xs-down">
  <div class="user-login text-center">
    <%- include('profile-image')-%>
      <div class="user-name">
        <h2>
          <%= session.name %>
        </h2>
        <a href="#">
          <%= session.email %>
            <%- include('edit-profile-icon')-%>
        </a>
      </div>
  </div>
<%- include('sidebar')-%>
</div>
          <div class="col-sm-12 col-lg-10">
            <div class="dashboard-inner">
              <div class="row">
                <div class="col-sm-12 col-lg-5">
                  <div class="row">
                    <div class="col-sm-6 col-md-6 col-lg-6">
                      <div class="well">
                        <div class="well-inner">
                          <img src="images/property.png" alt="" title="">
                          <h2>1,500+</h2>
                          <p>Active property</p>

                        </div>
                      </div>
                    </div>
                    <div class="col-sm-6 col-md-6 col-lg-6">
                      <div class="well">
                        <div class="well-inner">
                          <img src="images/property.png" alt="" title="">
                          <h2>3,000+</h2>
                          <p>Completed property</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-sm-12 col-lg-7">
                  <div class="row">
                    <div class="col-sm-6 col-md-6 col-lg-6">
                      <div class="recent-box">

                        <p>Recent</p>
                        <a href="/mydreamhome-details" alt="">
                          <h2>Nacary Apartment,<span>Sudirman, Central Jakarta</span></h2>
                        </a>
                        <div class="clearfix">
                          <div class="float-left">
                            <div class="recent-img">
                              <img src="images/recent-user-1.png"><img class="mr-10" src="images/recent-user-2.png"><img
                                class="mr-10" src="images/recent-user-3.png">
                            </div>
                          </div>
                          <div class="float-right">
                            <div class="progress-box">
                              <p><span>55%</span> completed</p>
                              <div class="progress">
                                <div class="progress-bar progress-bar-striped progress-bar-animated"></div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-6 col-md-6 col-lg-6">
                      <div class="recent-box">
                        <p>Recent</p>
                        <a href="/mydreamhome-details" alt="">
                          <h2>Nacary Apartment,<span>Sudirman, Central Jakarta</span></h2>
                        </a>
                        <div class="clearfix">
                          <div class="float-left">
                            <div class="recent-img">
                              <img src="images/recent-user-1.png"><img class="mr-10" src="images/recent-user-2.png"><img
                                class="mr-10" src="images/recent-user-3.png">
                            </div>
                          </div>
                          <div class="float-right">
                            <div class="progress-box">
                              <p><span>55%</span> completed</p>
                              <div class="progress">
                                <div class="progress-bar progress-bar-striped progress-bar-animated"></div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-6 col-md-6 col-lg-6">
                      <div class="recent-box">
                        <p>Recent</p>
                        <a href="/mydreamhome-details" alt="">
                          <h2>Nacary Apartment,<span>Sudirman, Central Jakarta</span></h2>
                        </a>
                        <div class="clearfix">
                          <div class="float-left">
                            <div class="recent-img">
                              <img src="images/recent-user-1.png"><img class="mr-10" src="images/recent-user-2.png"><img
                                class="mr-10" src="images/recent-user-3.png">
                            </div>
                          </div>
                          <div class="float-right">
                            <div class="progress-box">
                              <p><span>55%</span> completed</p>
                              <div class="progress">
                                <div class="progress-bar progress-bar-striped progress-bar-animated"></div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-6 col-md-6 col-lg-6">
                      <div class="recent-box">
                        <p>Recent</p>
                        <a href="/mydreamhome-details" alt="">
                          <h2>Nacary Apartment,<span>Sudirman, Central Jakarta</span></h2>
                        </a>
                        <div class="clearfix">
                          <div class="float-left">
                            <div class="recent-img">
                              <img src="images/recent-user-1.png"><img class="mr-10" src="images/recent-user-2.png"><img
                                class="mr-10" src="images/recent-user-3.png">
                            </div>
                          </div>
                          <div class="float-right">
                            <div class="progress-box">
                              <p><span>55%</span> completed</p>
                              <div class="progress">
                                <div class="progress-bar progress-bar-striped progress-bar-animated"></div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="property-map-section">
                <div class="row">
                  <div class="col-sm-12 col-lg-8">
                    <div class="map-location">
                      <div class="clearfix">
                        <div class="float-left">
                          <h2>Property Map</h2>
                        </div>
                        <div class="float-right">
                          <a href="/add-property" class="btn btn-add-property">Add Property</a>
                        </div>
                      </div>
                      <div id="map" style="width: 100%; height: 340px;"></div>
                    </div>
                  </div>
                  <div class="col-sm-12 col-lg-4">
                    <div class="my-professionals">
                      <h2>My Professionals</h2>
                      <ul class="professionals-list">
                        <li><a href="#"><img src="images/prof-img.png" alt="" title="">
                            <p>Soniya patidar</p>
                          </a></li>
                        <li><a href="#"><img src="images/prof-img.png" alt="" title="">
                            <p>Krishna Bihari Rajput</p>
                          </a></li>
                        <li><a href="#"><img src="images/prof-img.png" alt="" title=""></a></li>
                        <li><a href="#"><img src="images/prof-img.png" alt="" title=""></a></li>
                        <li><a href="#"><img src="images/prof-img.png" alt="" title=""></a></li>
                        <li><a href="#"><img src="images/prof-img.png" alt="" title=""></a></li>
                        <li><a href="#"><img src="images/prof-img.png" alt="" title=""></a></li>
                        <li><a href="#"><img src="images/prof-img.png" alt="" title=""></a></li>
                        <li><a href="/professionals" class="btn btn-add-professional">+</a></li>
                      </ul>
                      <div class="clearfix">
                        <div class="need-help float-left">
                          <h2>Need Help?</h2>
                          <p>24/7 support centre</p>
                        </div>
                        <div class="float-right">
                          <a href="#" class="btn btn-get-help">Get Help</a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <!-- <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"></script>
    <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.2/jquery.validate.min.js"
  integrity="sha512-UdIMMlVx0HEynClOIFSyOrPggomfhBKJE28LKl8yR3ghkgugPnG6iLfRfHwushZl1MOPSY6TsuBDGPK2X4zYKg=="
  crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10/dist/sweetalert2.min.js"></script>
    <script type="text/javascript">

      var locations = [
        ['Bondi Beach', -33.890542, 151.274856, 4],
        ['Coogee Beach', -33.923036, 151.259052, 5],
        ['Cronulla Beach', -34.028249, 151.157507, 3],
        ['Manly Beach', -33.80010128657071, 151.28747820854187, 2],
        ['Maroubra Beach', -33.950198, 151.259302, 1]
      ];

      var map = new google.maps.Map(document.getElementById('map'), {
        zoom: 10,
        center: new google.maps.LatLng(-33.92, 151.25),
        mapTypeId: google.maps.MapTypeId.ROADMAP
      });

      var infowindow = new google.maps.InfoWindow();

      var marker, i;

      for (i = 0; i < locations.length; i++) {
        marker = new google.maps.Marker({
          position: new google.maps.LatLng(locations[i][1], locations[i][2]),
          map: map
        });

        google.maps.event.addListener(marker, 'click', (function (marker, i) {
          return function () {
            infowindow.setContent(locations[i][0]);
            infowindow.open(map, marker);
          }
        })(marker, i));
      }
    </script>
    <script>
      $(document).ready(function () {
        $(".sidenav ul li").dblclick(function () {
          $(".sidenav ul li").removeClass("active");
          $(this).addClass("active");
        });
      });
      $('.right-navbar li').dblclick(function () {
        $('.right-navbar li').each(function () {
          $(this).removeClass('active');
        });

        $(this).addClass('active');

      })
    </script>
    <script>
      $(document).ready(function () {
        $(".buyertab").click(function (e) {
          $.ajax({
            type: "GET",
            url: "/buyer",
            cache: false,
            success: function (html) {
            }
          });
          location.reload(true);
        });
        $(".sellertab").click(function (e) {
          $.ajax({
            type: "GET",
            url: "/seller",
            cache: false,
            success: function (html) {
            }
          });
          location.reload(true);
        });
        $(".renovatortab").click(function (e) {
          $.ajax({
            type: "GET",
            url: "/renovator",
            cache: false,
            success: function (html) {
            }
          });
          location.reload(true);
        });
      })


function previewFile(input){
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
              console.log('filess:',input.files[0])
              if(input.files[0].type == 'image/jpeg' || input.files[0].type == 'image/png' || input.files[0].type == 'image/gif'){
                $('#blah').attr('src', e.target.result);
              }else{
                 Swal.fire({
                    icon: 'error',
                    title: 'File type not supported !!',
                    showConfirmButton: false,
                    confirmButtonColor: '#005377',
                    timer: 3000
                  })
              }
                //$('.ddddd').attr('src', e.target.result);
               // $('#uploaded_img').html('<li style="white-space: nowrap;overflow: hidden;text-overflow: ellipsis;"><a href="#"><img src="'+e.target.result+'" alt="" title=""><br><span>'+input.files[0].name+'</span></a></li>');
            }
            reader.readAsDataURL(input.files[0]);
        }
  }

    </script>
    <script>
      $(document).ready(function () {
        $('.custom-file-input input[type="file"]').change(function (e) {
          $(this).siblings('input[type="text"]').val(e.target.files[0].name);
        });
      });

      $(document).ready(function () {
        var imagename = '<%= session.imagename%>';
        //alert(imagename);
        if(imagename == '' || imagename == null){
          $('#photoModal').modal('show');
          $('.photo-cancel-modal').hide();
        }
            
      });

      $(document).ready(function () {
         var successAlert = '<% if(typeof success_msg!="undefined"){%><%=success_msg%><% }else{%>empty<%}%>';
        // alert(successAlert);
        console.log('successAlert:',successAlert);
         if(successAlert !== 'empty'){
               Swal.fire({
                   // position: 'top-end',
                    icon: 'success',
                    title: successAlert,
                    showConfirmButton: false,
                    confirmButtonColor: '#005377',
                    timer: 3000
                  })
         }
      });


  $('#changePasswordForm').validate({
    onfocusout: function (element) {
      this.element(element);
    },
    errorClass: 'error_validate',
    errorElement: 'span',
    errorColor: 'red',
    highlight: function (element, errorClass) {
      $(element).removeClass(errorClass);
    },
    submitHandler: function (form) {
     // $('#submit').attr('disabled', true);
        //$('#changePasswordForm').submit(function (e) {
          //e.preventDefault();
          var formData = $('#changePasswordForm').serialize();
          console.log('formData:',formData)
          $.ajax({
            type: "POST",
            data: formData,
            url: "/api/change-password", 
            cache:false,          
            success: function (data) {
              console.log(data);
              if(data.status == true){
                $('#changePasswordModal').modal('hide');
                 // $('.complaint_msg').html('<div class="isa_success"><i class="fa fa-check"></i> '+data.message+'</div>')
                  setTimeout(function(){ 
                    location.reload(true);
                  }, 4000);

                  Swal.fire({
                   // position: 'top-end',
                    icon: 'success',
                    title: data.message,
                    showConfirmButton: false,
                    confirmButtonColor: '#005377',
                    timer: 4000
                  })

              }else{
                
                    Swal.fire({
                      icon: 'error',
                      title: data.message,
                      showConfirmButton: false,
                      confirmButtonColor: '#005377',
                      timer: 4000
                    })
              
                //$('.complaint_msg').html('<div class="isa_error"><i class="fa fa-check"></i> '+data.message+'</div>')
              }
            }
          });
          //location.reload(true);
       
    }
  });
    </script>
    </body>

    </html>