<%- include('dashboard_header')-%>
  <%- include('edit-profile-model')-%>
    <!-- The Modal -->
    <div class="modal fade permission-modal" id="myModal">
      <div class="modal-dialog">
        <div class="modal-content">

          <!-- Modal Header -->
          <div class="modal-header">
            <h2 class="modal-title text-center">Change Permissions</h2>
          </div>

          <!-- Modal body -->
          <div class="modal-body">
            <label class="check-permission"><img src="images/recent-user-1.png">Alex Jackson, <span>Architect</span>
              <input type="checkbox" checked="checked">
              <span class="checkmark"></span>
            </label>
            <label class="check-permission"><img src="images/recent-user-1.png">Michael Williams, <span>Financial
                Advisor</span>
              <input type="checkbox">
              <span class="checkmark"></span>
            </label>
            <label class="check-permission"><img src="images/recent-user-1.png">Rachel Green, <span>Interior
                Designer</span>
              <input type="checkbox">
              <span class="checkmark"></span>
            </label>
            <label class="check-permission"><img src="images/recent-user-1.png">Alex Jackson, <span>Architect</span>
              <input type="checkbox">
              <span class="checkmark"></span>
            </label>
            <label class="check-permission"><img src="images/recent-user-1.png">Michael Williams, <span>Financial
                Advisor</span>
              <input type="checkbox">
              <span class="checkmark"></span>
            </label>
            <label class="check-permission"><img src="images/recent-user-1.png">Rachel Green, <span>Interior
                Designer</span>
              <input type="checkbox">
              <span class="checkmark"></span>
            </label>
          </div>
          <!-- Modal footer -->
          <div class="modal-footer">
            <button type="button" class="btn btn-cancel" data-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-cancel" data-dismiss="modal">Save</button>
          </div>

        </div>
      </div>
    </div>
    <div class="dashboard-wpr">
      <div class="container-fluid">
        <div class="row content">
          <div class="col-sm-2 sidenav hidden-xs-down">
            <div class="user-login text-center">

              <%- include('profile-image')-%>

                <div class="user-name">
                  <h2>
                    <%= session.name %>
                  </h2>
                  <a href="#">
                    <%= session.email %>
                      <%- include('edit-profile-icon')-%>
                  </a>
                </div>
            </div>
            <%- include('sidebar')-%>
          </div>
          <div class="col-sm-12 col-lg-10">

            <!-- <div class="row">
                <div class="breadcumb">
                  <ul>
                    <li><a href="/dashboard"><i class="fa fa-long-arrow-left" aria-hidden="true"></i> Back to Nacary
                        Apartment</a></li>
                  </ul>
                </div>
              </div> -->
            <div>
              <div class="professional-header">
                <div class="row">
                  <div class="col-sm-12 col-lg-12">
                    <div class="docs-files">
                      <div class="clearfix">
                        <div class="float-left">
                          <div class="dropdown">
                            <button type="button" class="btn btn-professional dropdown-toggle" data-toggle="dropdown">
                              My Professionals
                              <span><img src="images/drop-down2.png" alt=""></span> </button>
                            <div class="dropdown-menu ">
                              <a class="dropdown-item item1" href="/professionals"><span><img src="images/tick.png"
                                    alt=""></span>&nbsp;All Professionals</a>
                              <hr class="divider" />
                              <a class="dropdown-item item2" href="/myprofessionals"><span><img src="images/tick.png"
                                    alt=""></span> My professionals</a>
                            </div>
                          </div>
                        </div>
                        <div class="float-right">
                          <div class="professional-right-sec">
                            <form id="professional-search-form" action="#" method="POST">
                              <div id="custom-search-input-fix" style="background-color: #f0f0f0 ;">
                                  <div class="input-group professional-search-input col-lg-12">
                                    <span class="input-group-btn">
                                      <button class="btn btn-info" type="button">
                                        <i class="fa fa-search" aria-hidden="true"></i>
                                      </button>
                                    </span>
                                    <input type="text" required class="form-control professional-search"
                                      style="background-color: #f0f0f0;"
                                      placeholder="Search professionals by name, surname, qualification " />
                                  </div>
                              </div>
                              <button type="submit"  id="professional-search-btn"
                                class="btn professional-search-btn">Search</button>
                            </form>
                            <div class="dropdown keep-inside-clicks-open">
                              <button class="btn professional-search-btn dropdown-toggle" type="button"
                                id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                                aria-expanded="false">
                                Show Filters
                              </button>
                              <div class="dropdown-menu  dropdown-show-filter" aria-labelledby="dropdownMenuButton">

                                <div class="row">
                                  <div class="col-md-5">


                                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                                      <li class="nav-item">
                                        <a class="nav-link active" id="home-tab1" data-toggle="tab" href="#home1"
                                          role="tab" aria-controls="home1" aria-selected="true">Qualification</a>
                                      </li>
                                      <li class="nav-item">
                                        <a class="nav-link" id="profile-tab2" data-toggle="tab" href="#profile2"
                                          role="tab" aria-controls="profile2" aria-selected="false">Experience</a>
                                      </li>

                                    </ul>
                                  </div>
                                  <div class="col-md-7">

                                    <div class="tab-content" id="myTabContent">
                                      <div class="tab-pane fade show active" id="home1" role="tabpanel"
                                        aria-labelledby="home-tab1">
                                        <div class="inner-box-qualification">
                                          <div class="input-group search-input-new">
                                            <i class="fa fa-search"></i>
                                            <input id="search-input" type="search" id="form1" class="form-control" />
                                          </div>
                                          <div class="form-group for-select-existing-doc">
                                            <div class="input-group">
                                              <div>
                                                <div class="for-doc-select">
                                                  <div class="checkbox">
                                                    <label>
                                                      <input type="checkbox" value="">
                                                      <span class="cr"><i class="cr-icon fa fa-check"></i></span>
                                                      Dirving License

                                                    </label>
                                                  </div>
                                                </div>
                                                <div class="for-doc-select">
                                                  <div class="checkbox">
                                                    <label>
                                                      <input type="checkbox" value="">
                                                      <span class="cr"><i class="cr-icon fa fa-check"></i></span>
                                                      Passport

                                                    </label>
                                                  </div>
                                                </div>
                                                <div class="for-doc-select">
                                                  <div class="checkbox">
                                                    <label>
                                                      <input type="checkbox" value="">
                                                      <span class="cr"><i class="cr-icon fa fa-check"></i></span>
                                                      Form 3

                                                    </label>
                                                  </div>
                                                </div>
                                                <div class="for-doc-select">
                                                  <div class="checkbox">
                                                    <label>
                                                      <input type="checkbox" value="">
                                                      <span class="cr"><i class="cr-icon fa fa-check"></i></span>
                                                      Utility bill

                                                    </label>
                                                  </div>
                                                </div>
                                              </div>

                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                      <div class="tab-pane fade" id="profile2" role="tabpanel"
                                        aria-labelledby="profile-tab2">2</div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>



                          </div>
                        </div>
                      </div>
                      <div class="col-sm-12 col-lg-12">
                        <ul id="professional-role" class="icon-list">
                          <li><a data-role="Accountant" href="javascript:void(0)"><img src="images/accountant.png"
                                alt="" title=""><br><span>Accountants
                              </span></a>
                          </li>
                          <li><a data-role="Architect" href="javascript:void(0)"><img src="images/architect.png" alt=""
                                title=""><br><span>Architects</span></a>
                          </li>
                          <li><a data-role="Developer" href="javascript:void(0)"><img src="images/developers.png" alt=""
                                title=""><br><span>Developers
                              </span></a></li>
                          <li><a data-role="Engineer" href="javascript:void(0)"><img src="images/engineer.png" alt=""
                                title=""><br><span>Engineers </span></a>
                          </li>
                          <li><a data-role="Financial Advisor" href="javascript:void(0)"><img
                                src="images/financial-advisors.png" alt="" title=""><br><span>Financial
                                Advisors
                              </span></a></li>
                          <li><a data-role="Interior Designer" href="javascript:void(0)"><img
                                src="images/interior-designers.png" alt="" title=""><br><span>Interior
                                Designers
                              </span></a>
                          </li>
                          <li><a data-role="Lawyer/Conveyancer" href="javascript:void(0)"><img src="images/lawyers.png"
                                alt="" title=""><br><span>Lawyers/
                                Conveyancers</span></a>
                          </li>
                          <li><a data-role="Mortgage Broker" href="javascript:void(0)"><img
                                src="images/mortgage-broker.png" alt="" title=""><br><span>Mortgage
                                Brokers</span></a>
                          </li>
                          <li><a data-role="Surveyor" href="javascript:void(0)"><img src="images/surveyors.png" alt=""
                                title=""><br><span>Surveyors
                              </span></a>
                          </li>
                          <li style="margin-right:0px"><a data-role="Valuer" href="javascript:void(0)"><img
                                src="images/valuers.png" alt="" title=""><br><span>Valuers</span></a>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div style="display:none;" id="loading">
              <img id="loading-image" src="https://thumbs.gfycat.com/BitterEarnestBeardeddragon-small.gif" alt="Loading..." />
            </div>

            <div class="row professionals-card" id="filter_data">
              <% if(data.length>0){ data.forEach(function(row){ %>
                <div class="col-sm-4 col-md-4 col-lg-3">
                  <div class="card card-fix3">
                    <div class="row">
                      <div class="float-left card-header-fix">
                        <div class="semi-circle">
                          <a href="/professionals-detail?id=<%=row._id%>"> <img class="card-img-top"
                            src="images/recent-user-2.png" alt="Card image cap"> </a>
                        </div>
                      </div>
                      <div class="float-right card-content-fix">
                        <h5>
                          <a href="/professionals-detail?id=<%=row._id%>"><%= row.sps_fullname%></a> 
                        </h5>
                        <p>
                          <%= row.sps_role_name%>
                        </p>
                      </div>
                    </div>
                    <hr class="divider" />
                    <div class="row">
                      <div class="float-left card-icon-fix">
                        <img class=" card-image-fix" src="images/experience.png" alt="">&nbsp;<span>
                          <%= row.sps_experience%>
                            years
                        </span>
                      </div>
                      <div class="float-right card-icon-fix2">
                        <img class=" card-image-fix" src="images/rating.png" alt="">&nbsp;<span><%= row.avgRating %>
                          Rating</span>

                      </div>
                    </div>
                    <div class="card-body">
                      <button type="button" class="btn btn-cancel" style="margin-top: 30px; margin-bottom: 0px;"><a
                          style="color:#fff;" href="/professionals-detail?id=<%=row._id%>">View</a></button>
                    </div>
                  </div>
                </div>
                <% }); }else{ %>  
                  
                  <p class="notfound_msg">My professional not found !! </p>
                  <% } %>
                  <!-- <div class="col-sm-4 col-md-4 col-lg-3">
                <div class="card card-fix3">
                  <div class="row">
                    <div class="float-left card-header-fix">
                      <div class="semi-circle">
                        <img class="card-img-top" src="images/recent-user-2.png" alt="">
                      </div>
                    </div>
                    <div class="float-right card-content-fix">
                      <h5>Alex Jackson</h5>
                      <p>Architect</p>
                    </div>
                  </div>
                  <hr class="divider" />
                  <div class="row">
                    <div class="float-left card-icon-fix">
                      <img class=" card-image-fix" src="images/experience.png" alt="">&nbsp;<span>5
                        years</span>
                    </div>
                    <div class="float-right card-icon-fix2">
                      <img class=" card-image-fix" src="images/rating.png" alt="">&nbsp;<span>4.0
                        Rating</span>

                    </div>
                  </div>
                  <div class="card-body">
                    <button type="button" class="btn btn-cancel" style="margin-top: 30px; margin-bottom: 0px;">Track
                      Progress</button>
                  </div>
                </div>
              </div>
              <div class="col-sm-4 col-md-4 col-lg-3">
                <div class="card card-fix3">
                  <div class="row">
                    <div class="float-left card-header-fix">
                      <div class="semi-circle2">
                        <img class="card-img-top" src="images/recent-user-2.png" alt="">
                      </div>
                    </div>
                    <div class="float-right card-content-fix">
                      <h5>Alex Jackson</h5>
                      <p>Architect</p>
                    </div>
                  </div>
                  <hr class="divider" />
                  <div class="row">
                    <div class="float-left card-icon-fix">
                      <img class=" card-image-fix" src="images/experience.png" alt="">&nbsp;<span>5
                        years</span>
                    </div>
                    <div class="float-right card-icon-fix2">
                      <img class=" card-image-fix" src="images/rating.png" alt="">&nbsp;<span>4.0
                        Rating</span>
                    </div>
                  </div>
                  <div class="card-body">
                    <button type="button" class="btn btn-cancel" style="margin-top: 30px; margin-bottom: 0px;">Track
                      Progress</button>
                  </div>
                </div>
              </div> -->
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"></script>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>


    <script type="text/javascript" src="http://extreme.org.in/design/my-reflet-user/assets/js/poper.js"></script>
    <script type="text/javascript"
      src="http://extreme.org.in/design/my-reflet-user/assets/js/jquery-3.3.1.min.js"></script>



    <script type="text/javascript"
      src="http://extreme.org.in/design/my-reflet-user/assets/js/bootstrap.min.js"></script>

    <script type="text/javascript"
      src="http://extreme.org.in/design/my-reflet-user/assets/js/bootstrap-dropdownhover.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"></script>

    <script>
      $(document).on('click.bs.dropdown.data-api', '.dropdown.keep-inside-clicks-open', function (e) {
        e.stopPropagation();
      });
    </script>
    <script>
      $(document).ready(function () {
        $(".sidenav ul li").click(function () {
          $(".sidenav ul li").removeClass("active");
          $(this).addClass("active");
        });
      });
      $(document).ready(function () {
        $(".right-navbar li").click(function () {
          $("right-navbar li").removeClass("active");
          $(this).addClass("active");
        });
      });

      $("#professional-role li a").click(function (e) {
        $('#professional-role li a').removeClass('active_role');
        $(this).addClass('active_role');
        $('.loader-box').attr('style','display:flex !important');
        var role = $(this).data('role');
        $.ajax({
          type: "GET",
          data: {
            role: role
          },
          url: "/my-professionals-filter",
          cache: false,
          success: function (html) {
            $('.loader-box').attr('style','display:none !important');
            console.log('result:', html)
            var htmlData = '';
            if (html.data.length > 0) {
              $.each(html.data, function (i, data) {
                console.log('val:', data)
                htmlData += '<div class="col-sm-4 col-md-4 col-lg-3"><div class="card card-fix3"><div class="row"><div class="float-left card-header-fix"><div class="semi-circle"> <img class="card-img-top" src="images/recent-user-2.png" alt=""></div></div><div class="float-right card-content-fix"><h5> ' + data.sps_fullname + '</h5><p> ' + data.sps_role_name + '</p></div></div><hr class="divider"><div class="row"><div class="float-left card-icon-fix"> <img class=" card-image-fix" src="images/experience.png" alt="">&nbsp;<span> ' + data.sps_experience + ' years </span></div><div class="float-right card-icon-fix2"> <img class=" card-image-fix" src="images/rating.png" alt="">&nbsp;<span>4.0 Rating</span></div></div><div class="card-body"> <button type="button" class="btn btn-cancel" style="margin-top: 30px; margin-bottom: 0px;">Track Progress</button></div></div></div>';

              });
            } else {
              htmlData = '<div class="not-found"><p>Not Found !!</p></div>';
            }
            $('#filter_data').html(htmlData);
          }
        });
      });

      $('#professional-search-form').on('submit', function (e) {
          e.preventDefault();
     // $("#professional-search-btn").click(function (e) {
       $('.loader-box').attr('style','display:flex !important');
        var searchVal = $('.professional-search').val();
        console.log('searchVal:',searchVal)
        $.ajax({
          type: "GET",
          data: {
            searchKeyword: searchVal
          },
          url: "/my-professionals-searchbar",
          cache: false,
          success: function (html) {
            $('.loader-box').attr('style','display:none !important');
            console.log('result:', html.filterData)
            var htmlData = '';
            if (html.filterData.length > 0) {
              $.each(html.filterData, function (i, data) {
                console.log('val:', data)
                htmlData += '<div class="col-sm-4 col-md-4 col-lg-3"><div class="card card-fix3"><div class="row"><div class="float-left card-header-fix"><div class="semi-circle"> <img class="card-img-top" src="images/recent-user-2.png" alt=""></div></div><div class="float-right card-content-fix"><h5> ' + data.sps_fullname + '</h5><p> ' + data.sps_role_name + '</p></div></div><hr class="divider"><div class="row"><div class="float-left card-icon-fix"> <img class=" card-image-fix" src="images/experience.png" alt="">&nbsp;<span> ' + data.sps_experience + ' years </span></div><div class="float-right card-icon-fix2"> <img class=" card-image-fix" src="images/rating.png" alt="">&nbsp;<span>4.0 Rating</span></div></div><div class="card-body"> <button type="button" class="btn btn-cancel" style="margin-top: 30px; margin-bottom: 0px;">Track Progress</button></div></div></div>';

              });
            } else {
              htmlData = '<div class="not-found"><p>Not Found !!</p></div>';
            }
            $('#filter_data').html(htmlData);
          }
        });
      });




      // $("#professional-search-btn").click(function (e) {
      //   var searchVal = $('.professional-search').val();
      //   $.ajax({
      //     type: "GET",
      //     data: {
      //       searchKeyword: searchVal
      //     },
      //     url: "/my-professionals-searchbar",
      //     cache: false,
      //     success: function (html) {

      //       console.log('result:', html)
      //       var htmlData = '';
      //       if (html.filterData.length > 0) {
      //         $.each(html.filterData, function (i, data) {
      //           console.log('val:', data)
      //           htmlData += '<div class="col-lg-3"><div class="card card-fix2"><div class="row"><div class="float-left card-header-fix"> <a href="/professionals-detail?id=' + data._id + '"> <img class="card-img-top" src="images/recent-user-2.png" alt="Card image cap"> </a></div><div class="float-right card-content-fix"><h5> ' + data.sps_fullname + '</h5><p> ' + data.sps_role_name + '</p></div></div><hr class="divider"><div class="row"><div class="float-left card-icon-fix"> <img class=" card-image-fix" src="images/experience.png" alt="Card image cap">&nbsp;<span> ' + data.sps_experience + ' years </span></div><div class="float-right card-icon-fix2"> <img class=" card-image-fix" src="images/rating.png" alt="Card image cap">&nbsp;<span>4.0 Rating</span></div></div><div class="card-body"><p class="card-text">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed dLorem ipsum dolor sit</p></div></div></div>';

      //         });
      //       } else {
      //         htmlData = '<div class="not-found"><p>Not Found !!</p></div>';
      //       }
      //       $('#filter_data').html(htmlData);
      //     }
      //   });
      // });
      $('.right-navbar li').click(function () {
        $('.right-navbar li').each(function () {
          $(this).removeClass('active');
        });

        $(this).addClass('active');

      })

    </script>

    <script>
      $(document).ready(function () {
        $(".buyertab").click(function (e) {
          $.ajax({
            type: "GET",
            url: "/buyer",
            cache: false,
            success: function (html) {
            }
          });
          location.reload(true);
        });
        $(".sellertab").click(function (e) {
          $.ajax({
            type: "GET",
            url: "/seller",
            cache: false,
            success: function (html) {
            }
          });
          location.reload(true);
        });
        $(".renovatortab").click(function (e) {
          $.ajax({
            type: "GET",
            url: "/renovator",
            cache: false,
            success: function (html) {
            }
          });
          location.reload(true);
        });
      });
    </script>

    </body>

    </html>